<!doctype html><html lang="ja"><head><meta charset="utf-8"/><title>Bulma Project Javascript Tiles</title><meta name="description" content="Bulma Tiles are created automatically"/><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-extensions@6.2.7/dist/css/bulma-extensions.min.css"/><link rel="icon" type="image/png" href="../../assets/img/favicon-c2.png" sizes="16x16"/><script defer="defer" src="https://use.fontawesome.com/releases/v5.7.1/js/all.js"></script><script src="../../js/shortBulma$$.js"></script><style>.box {
        min-height: 50px;
      }

      .box-max {
        min-height: 200px;
      }</style><link href="../../../main.ef0929a6150b0869673d.css" rel="stylesheet"></head><body><nav class="navbar is-primary has-text-weight-medium has-shadow" role="navigation" aria-label="Main navigation" id="nav"><div class="container"><div class="navbar-brand"><a href="../../../index.html" class="navbar-item" title="Top page">BulmaProject</a><div id="burger" class="navbar-burger" data-target="navbarMenu"><span></span> <span></span> <span></span></div></div><div class="navbar-menu is-primary is-pulled-right mr-2" id="nav-links"><div class="navbar-start navbar-item"><a href="https://bulma.io/documentation/" target="_blank" rel="noopener noreferrer" class="button navbar-item is-primary is-fullwidth mt-1" title="Bulma home!!"><span class="icon"><img src="src/assets/img/bulma32.ico" alt="bulma"/> </span><span>Bulma</span></a></div><div class="navbar-end has-text-dark"><a href="../../sub/js/js.html" class="navbar-item has-text-right">Javascript</a> <a href="../../sub/hbs/hbs.html" class="navbar-item has-text-right">Handlebars</a> <a href="../../sub/tron/tron.html" class="navbar-item has-text-right">Electron</a> <a href="../../sub/ang/ang.html" class="navbar-item has-text-right">Angular</a> <a href="../../sub/react/react.html" class="navbar-item has-text-right">React</a></div></div></div></nav><section class="section"><div class="container"><div class="notification has-background-primary-light is-bold mb-1"><div class="container"><h1 class="title">Tilesの自動生成</h1><h2 class="subtitle is-5">Bulma Tiles are created automatically</h2></div></div><div class="section pt-0 pb-0"><nav class="breadcrumb has-arrow-separator"><ul class="is-size-6 container"><li><a href="/" class="has-text-grey-light">Top page</a></li><li><a href="../../sub/js/js.html" class="has-text-grey-light">Javascript</a></li><li class="is-active"><a href="#">TilesLayout</a></li></ul></nav></div><div class="columns mt-5 is-mobile has-background-white-bis"><div class="column"></div><div class="column is-8 content"><article class="message is-primary mt-2"><div class="message-header"><p>タイルのレイアウト　Layout: Tiles</p></div><div class="message-body has-background-white-bis" style="border-bottom: inset 2px #aaaa88"><p><strong>Javascript</strong> を使って、Tilesを自動生成します。</p></div></article><main><form><div class="box mb-2 py-2"><nav class="level"><div class="level-item mb-3"><div class="field"><label class="label" title="count of tiles">枚数</label><div class="control"><div class="select"><select id="sel"><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select></div></div></div></div><div class="field mt-3"><div class="control" id="rGroup"><input type="radio" class="is-checkradio" id="rad1" name="question" value="1"/> <label for="rad1" class="radio" title="ascending">昇順</label> <input type="radio" class="is-checkradio" id="rad2" name="question" value="2"/> <label for="rad2" class="radio" title="random order">ランダム</label> <input type="radio" class="is-checkradio" id="rad3" name="question" value="3"/> <label for="rad3" class="radio" title="descending">降順</label></div></div><div class="level-item"><div class="field"><div class="control"><button id="refresh" class="button is-medium is-danger is-light mt-4 mb-3" title="update button">更新</button></div></div></div></nav></div></form><div class="box"><div class="has-text-centered mb-5 has-text-grey-dark" title="layout pattern">並び方パターン： <span id="pat1" class="has-text-primary-dark has-text-weight-semibold is-size-5"></span></div><div class="tile is-ancestor is-mobile"><div class="tile is-parent"><div class="tile is-child box"></div></div><div class="tile is-parent"><div class="tile is-child box"></div></div></div><template id="t0"><div class="tile is-parent"><div class="tile is-child box"></div></div></template><template id="t1"><div class="tile"><div class="tile is-parent"><div class="tile is-child box"></div></div><div class="tile is-parent"><div class="tile is-child box"></div></div></div></template><div class="has-text-centered mb-2 has-text-grey-dark" title="layout pattern">並び方パターン： <span id="pat2" class="has-text-primary-dark has-text-weight-semibold is-size-5"></span></div></div></main><div class="box"><h2 class="subtitle has-background-white-ter mb-2 p-2">上記のソースコード</h2><blockquote class="is-size-6 ml-2"><pre id="pre1">
&lt;!-- tilesLayout$$.html --&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Bulma Project Javascript Tiles&lt;/title&gt;
    &lt;meta name=&quot;description&quot; content=&quot;Bulma Tiles are created automatically&quot; /&gt;
    &lt;meta
      name=&quot;viewport&quot;
      content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;
    /&gt;

    &lt;link
      rel=&quot;stylesheet&quot;
      href=&quot;https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css&quot;
    /&gt;
    &lt;link
      rel=&quot;stylesheet&quot;
      href=&quot;https://cdn.jsdelivr.net/npm/bulma-extensions@6.2.7/dist/css/bulma-extensions.min.css&quot;
    /&gt;

    &lt;link
      rel=&quot;icon&quot;
      type=&quot;image/png&quot;
      href=&quot;/assets/img/favicon-c2.png&quot;
      sizes=&quot;16x16&quot;
    /&gt;

    &lt;script
      defer
      src=&quot;https://use.fontawesome.com/releases/v5.7.1/js/all.js&quot;
    &gt;&lt;/script&gt;

    &lt;script src=&quot;/src/js/shortBulma$$.js&quot;&gt;&lt;/script&gt;
    &lt;!-- &lt;script src=&quot;../../js/shortBulma$$.js&quot;&gt;&lt;/script&gt; --&gt;

    &lt;style&gt;
      .box {
        min-height: 50px;
      }

      .box-max {
        min-height: 200px;
      }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;section class=&quot;section&quot;&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;columns is-mobile has-background-white-bis&quot;&gt;
          &lt;div class=&quot;column&quot;&gt;&lt;/div&gt;
          &lt;div class=&quot;column is-8 content&quot;&gt;
            &lt;article class=&quot;message is-primary&quot;&gt;
              &lt;div class=&quot;message-header&quot;&gt;
                &lt;p&gt;タイルのレイアウト　Layout: Tiles&lt;/p&gt;
              &lt;/div&gt;

              &lt;div
                class=&quot;message-body has-background-white-bis&quot;
                style=&quot;border-bottom: inset 2px #aaaa88&quot;
              &gt;
                &lt;p&gt;
                  &lt;strong&gt;Javascript&lt;/strong&gt;
                  を使って、Tilesを自動生成します。
                &lt;/p&gt;
              &lt;/div&gt;
            &lt;/article&gt;

            &lt;main&gt;
              &lt;form&gt;
                &lt;!--  --&gt;
                &lt;div class=&quot;box mb-2 py-2&quot;&gt;
                  &lt;nav class=&quot;level&quot;&gt;
                    &lt;div class=&quot;level-item mb-3&quot;&gt;
                      &lt;div class=&quot;field&quot;&gt;
                        &lt;!-- &lt;div class=&quot;field is-grouped&quot;&gt; --&gt;
                        &lt;label class=&quot;label&quot; title=&quot;count of tiles&quot;&gt;枚数&lt;/label&gt;
                        &lt;div class=&quot;control&quot;&gt;
                          &lt;div class=&quot;select&quot;&gt;
                            &lt;select id=&quot;sel&quot;&gt;
                              &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
                              &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;
                              &lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;
                              &lt;option value=&quot;6&quot;&gt;6&lt;/option&gt;
                              &lt;option value=&quot;7&quot;&gt;7&lt;/option&gt;
                              &lt;option value=&quot;8&quot;&gt;8&lt;/option&gt;
                              &lt;option value=&quot;9&quot;&gt;9&lt;/option&gt;
                              &lt;option value=&quot;10&quot;&gt;10&lt;/option&gt;
                              &lt;option value=&quot;11&quot;&gt;11&lt;/option&gt;
                              &lt;option value=&quot;12&quot;&gt;12&lt;/option&gt;
                            &lt;/select&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;field mt-3&quot;&gt;
                      &lt;div class=&quot;control&quot; id=&quot;rGroup&quot;&gt;
                        &lt;input
                          type=&quot;radio&quot;
                          class=&quot;is-checkradio&quot;
                          id=&quot;rad1&quot;
                          name=&quot;question&quot;
                          value=&quot;1&quot;
                        /&gt;
                        &lt;label for=&quot;rad1&quot; class=&quot;radio&quot; title=&quot;ascending&quot;
                          &gt;昇順
                        &lt;/label&gt;

                        &lt;input
                          type=&quot;radio&quot;
                          class=&quot;is-checkradio&quot;
                          id=&quot;rad2&quot;
                          name=&quot;question&quot;
                          value=&quot;2&quot;
                        /&gt;
                        &lt;label for=&quot;rad2&quot; class=&quot;radio&quot; title=&quot;random order&quot;
                          &gt;ランダム
                        &lt;/label&gt;

                        &lt;input
                          type=&quot;radio&quot;
                          class=&quot;is-checkradio&quot;
                          id=&quot;rad3&quot;
                          name=&quot;question&quot;
                          value=&quot;3&quot;
                        /&gt;
                        &lt;label for=&quot;rad3&quot; class=&quot;radio&quot; title=&quot;descending&quot;
                          &gt;降順
                        &lt;/label&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;level-item&quot;&gt;
                      &lt;div class=&quot;field&quot;&gt;
                        &lt;div class=&quot;control&quot;&gt;
                          &lt;button
                            id=&quot;refresh&quot;
                            class=&quot;button is-medium is-danger is-light mt-4 mb-3&quot;
                            title=&quot;update button&quot;
                          &gt;
                            更新
                          &lt;/button&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/nav&gt;
                &lt;/div&gt;
              &lt;/form&gt;

              &lt;div class=&quot;box&quot;&gt;
                &lt;div
                  class=&quot;has-text-centered mb-5 has-text-grey-dark&quot;
                  title=&quot;layout pattern&quot;
                &gt;
                  並び方パターン：
                  &lt;span
                    id=&quot;pat1&quot;
                    class=&quot;has-text-primary-dark has-text-weight-semibold is-size-5&quot;
                  &gt;&lt;/span&gt;
                &lt;/div&gt;

                &lt;!-- // Ancestor --&gt;
                &lt;div class=&quot;tile is-ancestor is-mobile&quot;&gt;
                  &lt;div class=&quot;tile is-parent&quot;&gt;
                    &lt;div class=&quot;tile is-child box&quot;&gt;&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div class=&quot;tile is-parent&quot;&gt;
                    &lt;div class=&quot;tile is-child box&quot;&gt;&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;template id=&quot;t0&quot;&gt;
                  &lt;div class=&quot;tile is-parent&quot;&gt;
                    &lt;div class=&quot;tile is-child box&quot;&gt;&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/template&gt;

                &lt;template id=&quot;t1&quot;&gt;
                  &lt;div class=&quot;tile&quot;&gt;
                    &lt;div class=&quot;tile is-parent&quot;&gt;
                      &lt;div class=&quot;tile is-child box&quot;&gt;&lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;tile is-parent&quot;&gt;
                      &lt;div class=&quot;tile is-child box&quot;&gt;&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/template&gt;

                &lt;div
                  class=&quot;has-text-centered mb-2 has-text-grey-dark&quot;
                  title=&quot;layout pattern&quot;
                &gt;
                  並び方パターン：
                  &lt;span
                    id=&quot;pat2&quot;
                    class=&quot;has-text-primary-dark has-text-weight-semibold is-size-5&quot;
                  &gt;&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/main&gt;

            &lt;div class=&quot;box&quot;&gt;
              &lt;div class=&quot;box&quot;&gt;
                &lt;h2 class=&quot;is-size-4 has-background-white-ter p-2 km&quot;&gt;解説&lt;/h2&gt;
                &lt;div class=&quot;content&quot;&gt;
                  &lt;ul&gt;
                    &lt;li&gt;
                      Tilesにも
                      &lt;span class=&quot;has-text-danger-dark&quot;&gt;is-mobile&lt;/span
                      &gt;等が機能すると面白いのですが。
                    &lt;/li&gt;
                    &lt;li&gt;
                      BulmaでJavascriptを利用するために、このWebサイトでは&lt;br /&gt;
                      　&lt;a href=&quot;shortBulma.html&quot;
                        &gt;&lt;strong&gt;shortBulma$$.js&lt;/strong&gt; または
                        &lt;strong&gt;shortBulma.js&lt;/strong&gt;&lt;/a
                      &gt;&lt;br /&gt;
                      というライブラリを使います。
                    &lt;/li&gt;
                    &lt;li class=&quot;pt-2&quot;&gt;
                      使い方の例：&amp;lt;script
                      src=&amp;quot;/src/js/shortBulma$$.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;br /&gt;
                      headタグ内に挿入。但し、pathは状況によって変わります。
                    &lt;/li&gt;
                    &lt;li class=&quot;pt-2&quot;&gt;
                      上記のpathの設定の確認をしておいてください。
                      &lt;p class=&quot;pt-3 px-3&quot;&gt;
                        例えば、notification$$.htmlとshortBulma$$.jsが同じフォルダにある時は&lt;br /&gt;
                        &amp;lt;script
                        src=&amp;quot;./shortBulma$$.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
                        または&lt;br /&gt;
                        &amp;lt;script
                        src=&amp;quot;shortBulma$$.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
                        となります。
                      &lt;/p&gt;
                    &lt;/li&gt;
                    &lt;li&gt;
                      より詳しくは&lt;a href=&quot;shortBulma.html&quot;
                        &gt;&lt;strong&gt; shortBulma$$.js &lt;/strong&gt; &lt;/a
                      &gt;をご覧ください。
                    &lt;/li&gt;
                    &lt;hr /&gt;

                    &lt;li class=&quot;pt-1&quot;&gt;
                      &lt;dl&gt;
                        &lt;dt&gt;$$de = (f) =&gt; { ...&#039;DOMContentLoaded&#039;, f)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;ロード時にイベントリスナーfを設定&lt;/dd&gt;
                        &lt;dt&gt;$$qAll(&#039;div.tile&#039;)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;
                          セレクター&#039;div.tile&#039;を持つ全ての要素を取得
                        &lt;/dd&gt;
                        &lt;dt&gt;$$qe(&#039;#sel&#039;, f)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;
                          セレクター&#039;#sel&#039;を持つ要素にイベントリスナーfを設定
                        &lt;/dd&gt;
                        &lt;dt&gt;$$qAe(&#039;#rGroup input&#039;, f)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;
                          セレクター&#039;#rGroup
                          input&#039;を持つ全ての要素にイベントリスナーfを設定
                        &lt;/dd&gt;
                        &lt;dt&gt;$$Id(&#039;#sel&#039;)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;idが&#039;sel&#039;である要素を取得&lt;/dd&gt;
                        &lt;dt&gt;$$ocL(o, cL, &#039;add&#039;)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;要素oのクラスリストに、cLを追加&lt;/dd&gt;
                        &lt;dt&gt;$$qoAll(o, &#039;div.traceF&#039;)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;
                          要素oの子孫で、セレクター&#039;div.traceF&#039;を持つ全ての要素を取得
                        &lt;/dd&gt;
                        &lt;dt&gt;$$DF()&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;DocumentFragmentを作成&lt;/dd&gt;
                        &lt;dt&gt;$$tCc(&#039;t0&#039;)&lt;/dt&gt;
                        &lt;dd class=&quot;py-2&quot;&gt;
                          idが&#039;t0&#039;であるテンプレート要素からクローンを作成します。（複製）
                        &lt;/dd&gt;
                      &lt;/dl&gt;
                    &lt;/li&gt;
                  &lt;/ul&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;hr /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div class=&quot;column&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;

    &lt;!-- &lt;script src=&quot;/src/sub/js/bgColors.js&quot;&gt;&lt;/script&gt; --&gt;
    &lt;!-- &lt;script src=&quot;bgColors.js&quot;&gt;&lt;/script&gt; --&gt;

    &lt;script type=&quot;text/javascript&quot;&gt;
      let tilesN = 9;
      let patternNo = 3; // &#039;00000000&#039;; // 降順
      let patternSS;
      let lastANode = null;

      const bgColors = [
        &#039;has-background-primary&#039;,
        &#039;has-background-info&#039;,
        &#039;has-background-success&#039;,
        &#039;has-background-warning&#039;,
        &#039;has-background-danger&#039;,
        &#039;has-background-primary-dark&#039;,
        &#039;has-background-success-dark&#039;,
        &#039;has-background-warning-dark&#039;,
        &#039;has-background-danger-dark&#039;,
      ];

      $$de(() =&gt; {
        // 画面初期表示
        $$Id(&#039;#sel&#039;).value = tilesN;
        $$Id(&#039;#rGroup&#039;).children[2 * patternNo - 2].checked = true;
        // tree生成 {色・ランダム}
        update();

        // event ~~~
        $$qe(&#039;#sel&#039;, (e) =&gt; (tilesN = e.target.value), &#039;change&#039;);
        // 重要 tilesN

        $$qAe(
          &#039;#rGroup input&#039;,
          (e) =&gt; {
            patternNo = +e.target.value;
          },
          &#039;change&#039;
        );

        $$qe(&#039;#refresh&#039;, (e) =&gt; {
          e.target.disabled = true;
          e.preventDefault();

          tilesN = +$$q(&#039;#sel&#039;).value;
          patternNo = +getRadioValue(&#039;question&#039;);
          update();
          e.target.disabled = false;
        });
      });

      // functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~

      const update = () =&gt; {
        const Ancestor = $$q(&#039;.is-ancestor&#039;);
        // let stepBss = zeroPadding_2();
        // let stepBss = &#039;00000000&#039;; // 降順
        // let stepBss = &#039;10101010&#039;;
        // let stepBss = &#039;01010101&#039;;
        // let stepBss = &#039;11111111&#039;; // 昇順

        patternSS = getPattern();
        dispPattern();
        // dummy for a classList.add() trouble
        if (patternSS.charAt(0) === &#039;1&#039;) {
          Ancestor.replaceChild(mkF0(), Ancestor.children[1]);
          setColor0(Ancestor.children[1].children[0]);
          Ancestor.replaceChild(mkF(), Ancestor.children[0]);
          // swapTwo(Ancestor);
        } else {
          Ancestor.replaceChild(mkF0(), Ancestor.children[0]);
          setColor0(Ancestor.children[0].children[0]);
          Ancestor.replaceChild(mkF(), Ancestor.children[1]);
        }
      };

      const setColor0 = (o) =&gt; {
        $$ocL(o, bgColors[getRNum(bgColors.length)], &#039;add&#039;);
      };

      const getPattern = () =&gt; {
        switch (patternNo) {
          case 1:
            return &#039;111111111111111&#039;.slice(-(tilesN - 2)); // 昇順
          case 2:
            return zeroPadding_2();
          case 3:
            return &#039;000000000000000&#039;.slice(-(tilesN - 2)); // 降順
          default:
            console.log(&#039;getPattern -&gt; patternNo=1~3&#039;, patternNo);
        }
      };

      const dispPattern = () =&gt; {
        $$Id(&#039;pat1&#039;).textContent = patternSS;
        $$Id(&#039;pat2&#039;).textContent = patternSS;
      };

      const swapTwo = (parent) =&gt; {
        let child1 = parent.firstElementChild;
        let child2 = child1.nextElementSibling;
        if (!child1 || !child2) {
          throw new Error(&quot;Can&#039;t get child!&quot;);
        }

        parent.insertBefore(child2, child1); // 置換
      };

      const mkF0 = () =&gt; {
        // dummy
        if (tilesN &lt;= 2) return null;

        let DF0 = $$DF(); // new DocumentFragment()
        let tCc = $$tCc(&#039;t0&#039;); // document.importNode($$tC(id), b)
        DF0.appendChild(tCc);
        return DF0;
      };

      const mkF = () =&gt; {
        if (tilesN &lt;= 2) return null;

        let DF = $$DF(); // new DocumentFragment()
        let traceTile = null;

        for (step = 2; step &lt;= tilesN - 1; step++) {
          // setup tCclone
          const tCclone = $$tCc(&#039;t1&#039;); // document.importNode($$tC(id), b)
          const cloneTop = tCclone.firstElementChild;

          if (step % 2 === 0) cloneTop.classList.add(&#039;is-vertical&#039;);

          const i = patternSS.charAt(step - 2) === &#039;1&#039; ? 1 : 0;

          setColor0(cloneTop.children[0].firstElementChild);
          setColor0(cloneTop.children[1].firstElementChild);
          $$ocL(cloneTop.children[1 - i], &#039;anchorF&#039;);
          if (step === tilesN - 1) {
            setColor0(cloneTop.children[1 - i].firstElementChild);
          }
          if (step === 2) {
            DF.appendChild(tCclone);
            traceTile = DF.firstElementChild;
          } else {
            traceTile.replaceChild(tCclone, traceTile.children[1 - i]);
            traceTile = traceTile.children[1 - i];
          }
          $$ocL(traceTile, &#039;traceF&#039;);
        }
        return DF;
      };

      const getTraceTile = (o) =&gt; {
        let tiles = $$qoAll(o, &#039;div.traceF&#039;);
        console.log(&#039;getTraceTile -&gt; tiles.length - 1&#039;, tiles.length - 1);
        return tiles[tiles.length - 1];
      };

      const setColor = () =&gt; {
        let tiles = $$qAll(&#039;div.tile&#039;);

        let i = 0;
        tiles.forEach((t) =&gt; {
          const x = bgColors[getRNum(bgColors.length)];
          if (i === tiles.length - 1) {
            $$ocL(t, x, &#039;add&#039;);
            return;
          }

          if (i % 3 === 2) {
            $$ocL(t, x, &#039;add&#039;);
            // if (i &lt;= 5) console.log(&#039;setColor -&gt; x&#039;, x);
          }
          i++;
        });
      };

      const getRNum = (n) =&gt; {
        return Math.floor(Math.random() * n);
      };

      const zeroPadding = (num, length) =&gt; {
        return (&#039;000000000000000&#039; + num.toString(2)).slice(-length);
      };

      const zeroPadding_2 = () =&gt; {
        const steps = tilesN - 1;
        const rnd = Math.floor(Math.pow(2, steps) * Math.random());
        return (&#039;000000000000000&#039; + rnd.toString(2)).slice(-(steps - 1));
      };

      const getRadioValue = (na) =&gt; {
        let ret = &#039;&#039;;

        $$na(na).forEach((elm) =&gt; {
          if (elm.checked) {
            ret = elm.value;
          }
        });
        return ret;
      };
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></blockquote></div><div class="box"><div class="box"><h2 class="is-size-4 has-background-white-ter p-2 km">解説</h2><div class="content"><ul><li>Tilesにも <span class="has-text-danger-dark">is-mobile</span>等が機能すると面白いのですが。</li><li>BulmaでJavascriptを利用するために、このWebサイトでは<br/>　<a href="shortBulma.html"><strong>shortBulma$$.js</strong> または <strong>shortBulma.js</strong></a><br/>というライブラリを使います。</li><li class="pt-2">使い方の例：&lt;script src=&quot;/src/js/shortBulma$$.js&quot;&gt;&lt;/script&gt;<br/>headタグ内に挿入。但し、pathは状況によって変わります。</li><li class="pt-2">上記のpathの設定の確認をしておいてください。<p class="pt-3 px-3">例えば、TilesLayout$$.htmlとshortBulma$$.jsが同じフォルダにある時は<br/>&lt;script src=&quot;./shortBulma$$.js&quot;&gt;&lt;/script&gt; または<br/>&lt;script src=&quot;shortBulma$$.js&quot;&gt;&lt;/script&gt; となります。</p></li><li>より詳しくは<a href="shortBulma.html"><strong> shortBulma$$.js </strong></a>をご覧ください。</li><hr/><li class="pt-1"><dl><dt>$$de = (f) => { ...'DOMContentLoaded', f)</dt><dd class="py-2">ロード時にイベントリスナーfを設定</dd><dt>$$qAll('div.tile')</dt><dd class="py-2">セレクター'div.tile'を持つ全ての要素を取得</dd><dt>$$qe('#sel', f)</dt><dd class="py-2">セレクター'#sel'を持つ要素にイベントリスナーfを設定</dd><dt>$$qAe('#rGroup input', f)</dt><dd class="py-2">セレクター'#rGroup input'を持つ全ての要素にイベントリスナーfを設定</dd><dt>$$Id('#sel')</dt><dd class="py-2">idが'sel'である要素を取得</dd><dt>$$ocL(o, cL, 'add')</dt><dd class="py-2">要素oのクラスリストに、cLを追加</dd><dt>$$qoAll(o, 'div.traceF')</dt><dd class="py-2">要素oの子孫で、セレクター'div.traceF'を持つ全ての要素を取得</dd><dt>$$DF()</dt><dd class="py-2">DocumentFragmentを作成</dd><dt>$$tCc('t0')</dt><dd class="py-2">idが't0'であるテンプレート要素からクローンを作成します。（複製）</dd></dl></li></ul></div></div><hr/></div></div><div class="column"></div></div><div class="section pt-0 pb-0"><nav class="breadcrumb has-arrow-separator"><ul class="is-size-6 container"><li><a href="/" class="has-text-grey-light">Top page</a></li><li><a href="../../sub/js/js.html" class="has-text-grey-light">Javascript</a></li><li class="is-active"><a href="#">TilesLayout</a></li></ul></nav></div></div></section><script>$$bulmaMenu('#burger', '#nav-links');
      $$codeS('#pre1');</script><script>let tilesN = 9;
      let patternNo = 3; // '00000000'; // 降順
      let patternSS;
      let lastANode = null;

      const bgColors = [
        'has-background-primary',
        'has-background-info',
        'has-background-success',
        'has-background-warning',
        'has-background-danger',
        'has-background-primary-dark',
        'has-background-success-dark',
        'has-background-warning-dark',
        'has-background-danger-dark',
      ];

      $$de(() => {
        // 画面初期表示
        $$Id('#sel').value = tilesN;
        $$Id('#rGroup').children[2 * patternNo - 2].checked = true;
        // tree生成 {色・ランダム}
        update();

        // event ~~~
        $$qe('#sel', (e) => (tilesN = e.target.value), 'change');
        // 重要 tilesN

        $$qAe(
          '#rGroup input',
          (e) => {
            patternNo = +e.target.value;
          },
          'change'
        );

        $$qe('#refresh', (e) => {
          e.target.disabled = true;
          e.preventDefault();

          tilesN = +$$q('#sel').value;
          patternNo = +getRadioValue('question');
          update();
          e.target.disabled = false;
        });
      });

      // functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~

      const update = () => {
        const Ancestor = $$q('.is-ancestor');
        // let stepBss = zeroPadding_2();
        // let stepBss = '00000000'; // 降順
        // let stepBss = '10101010';
        // let stepBss = '01010101';
        // let stepBss = '11111111'; // 昇順

        patternSS = getPattern();
        dispPattern();
        // dummy for a classList.add() trouble
        if (patternSS.charAt(0) === '1') {
          Ancestor.replaceChild(mkF0(), Ancestor.children[1]);
          setColor0(Ancestor.children[1].children[0]);
          Ancestor.replaceChild(mkF(), Ancestor.children[0]);
          // swapTwo(Ancestor);
        } else {
          Ancestor.replaceChild(mkF0(), Ancestor.children[0]);
          setColor0(Ancestor.children[0].children[0]);
          Ancestor.replaceChild(mkF(), Ancestor.children[1]);
        }
      };

      const setColor0 = (o) => {
        $$ocL(o, bgColors[getRNum(bgColors.length)], 'add');
      };

      const getPattern = () => {
        switch (patternNo) {
          case 1:
            return '111111111111111'.slice(-(tilesN - 2)); // 昇順
          case 2:
            return zeroPadding_2();
          case 3:
            return '000000000000000'.slice(-(tilesN - 2)); // 降順
          default:
            console.log('getPattern -> patternNo=1~3', patternNo);
        }
      };

      const dispPattern = () => {
        $$Id('pat1').textContent = patternSS;
        $$Id('pat2').textContent = patternSS;
      };

      const swapTwo = (parent) => {
        let child1 = parent.firstElementChild;
        let child2 = child1.nextElementSibling;
        if (!child1 || !child2) {
          throw new Error("Can't get child!");
        }

        parent.insertBefore(child2, child1); // 置換
      };

      const mkF0 = () => {
        // dummy
        if (tilesN <= 2) return null;

        let DF0 = $$DF(); // new DocumentFragment()
        let tCc = $$tCc('t0'); // document.importNode($$tC(id), b)
        DF0.appendChild(tCc);
        return DF0;
      };

      const mkF = () => {
        if (tilesN <= 2) return null;

        let DF = $$DF(); // new DocumentFragment()
        let traceTile = null;

        for (step = 2; step <= tilesN - 1; step++) {
          // setup tCclone
          const tCclone = $$tCc('t1'); // document.importNode($$tC(id), b)
          const cloneTop = tCclone.firstElementChild;

          if (step % 2 === 0) cloneTop.classList.add('is-vertical');

          const i = patternSS.charAt(step - 2) === '1' ? 1 : 0;

          setColor0(cloneTop.children[0].firstElementChild);
          setColor0(cloneTop.children[1].firstElementChild);
          $$ocL(cloneTop.children[1 - i], 'anchorF');
          if (step === tilesN - 1) {
            setColor0(cloneTop.children[1 - i].firstElementChild);
          }
          if (step === 2) {
            DF.appendChild(tCclone);
            traceTile = DF.firstElementChild;
          } else {
            traceTile.replaceChild(tCclone, traceTile.children[1 - i]);
            traceTile = traceTile.children[1 - i];
          }
          $$ocL(traceTile, 'traceF');
        }
        return DF;
      };

      const getTraceTile = (o) => {
        let tiles = $$qoAll(o, 'div.traceF');
        console.log('getTraceTile -> tiles.length - 1', tiles.length - 1);
        return tiles[tiles.length - 1];
      };

      const setColor = () => {
        let tiles = $$qAll('div.tile');

        let i = 0;
        tiles.forEach((t) => {
          const x = bgColors[getRNum(bgColors.length)];
          if (i === tiles.length - 1) {
            $$ocL(t, x, 'add');
            return;
          }

          if (i % 3 === 2) {
            $$ocL(t, x, 'add');
            // if (i <= 5) console.log('setColor -> x', x);
          }
          i++;
        });
      };

      const getRNum = (n) => {
        return Math.floor(Math.random() * n);
      };

      const zeroPadding = (num, length) => {
        return ('000000000000000' + num.toString(2)).slice(-length);
      };

      const zeroPadding_2 = () => {
        const steps = tilesN - 1;
        const rnd = Math.floor(Math.pow(2, steps) * Math.random());
        return ('000000000000000' + rnd.toString(2)).slice(-(steps - 1));
      };

      const getRadioValue = (na) => {
        let ret = '';

        $$na(na).forEach((elm) => {
          if (elm.checked) {
            ret = elm.value;
          }
        });
        return ret;
      };</script><script src="../../../main.6af79e4ef33048338434.bundle.js"></script><script src="../../../vendor.23e019281b5239926c72.bundle.js"></script></body></html>