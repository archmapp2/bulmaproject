<!doctype html><html lang="ja"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="description" content="Bulma Handlebars"/><title>Bulma Project Handlebars</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-extensions@6.2.7/dist/css/bulma-extensions.min.css"/><script defer="defer" src="https://use.fontawesome.com/releases/v5.7.1/js/all.js"></script><script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script><link rel="icon" type="image/png" href="../../assets/img/favicon-c2.png" sizes="16x16"/><script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script><script src="../../js/shortBulma$$.js"></script><script src="../../js/shortHbs$$.js"></script><link href="../../../main.ef0929a6150b0869673d.css" rel="stylesheet"></head><body><nav class="navbar is-primary has-text-weight-medium has-shadow" role="navigation" aria-label="Main navigation" id="nav"><div class="container"><div class="navbar-brand"><a href="../../../index.html" class="navbar-item" title="Top page">BulmaProject</a><div id="burger" class="navbar-burger" data-target="navbarMenu"><span></span> <span></span> <span></span></div></div><div class="navbar-menu is-primary is-pulled-right mr-2" id="nav-links"><div class="navbar-start navbar-item"><a href="https://bulma.io/documentation/" target="_blank" rel="noopener noreferrer" class="button navbar-item is-primary is-fullwidth mt-1" title="Bulma home!!"><span class="icon"><img src="src/assets/img/bulma32.ico" alt="bulma"/> </span><span>Bulma</span></a></div><div class="navbar-end has-text-dark"><a href="../../sub/js/js.html" class="navbar-item has-text-right">Javascript</a> <a href="../../sub/hbs/hbs.html" class="navbar-item has-text-right">Handlebars</a> <a href="../../sub/tron/tron.html" class="navbar-item has-text-right">Electron</a> <a href="../../sub/ang/ang.html" class="navbar-item has-text-right">Angular</a> <a href="../../sub/react/react.html" class="navbar-item has-text-right">React</a></div></div></div></nav><section class="section"><div class="container"><div class="notification has-background-primary-light is-bold mb-1"><div class="container"><h1 class="title">Handlebars</h1><h2 class="subtitle is-5">Handlebars & Web Components</h2></div></div><div class="section pt-0 pb-0"><nav class="breadcrumb has-arrow-separator"><ul class="is-size-6 container"><li><a href="/" class="has-text-grey-light">Top page</a></li><li><a href="../../sub/hbs/hbs.html" class="has-text-grey-light">Handlebars</a></li><li class="is-active"><a href="#">packtpub</a></li></ul></nav></div><div class="columns mt-5"><div class="column"></div><div class="column is-8"><article class="message is-primary"><div class="message-header subtitle"><p>初めての [<strong>Handlebars</strong>]</p></div><div class="notification has-background-primary-light py-1"><h3 class="subtitle is-size-6">ブロックヘルパー関数と そうでないヘルパー関数( tag helper )</h3><div class="subtitle">Handlebars.registerHelper('formIt', f), options.fn()</div></div><div class="message-body has-background-grey-lighter" style="border-bottom: inset 2px #aaaa88"><p>&lt;form>には、Bulmaの拡張機能 <strong>bulma-extensions</strong> が使われています。</p></div></article><main><section class="section"><div class="container"><div id="target"></div></div></section><script id="template" type="text/x-handlebars-template"><div>
                  <article class='message has-background-success-light'>
                    <div class='message-header has-background-warning'>
                      <p>
                        ヘルパー関数
                      </p>
                    </div>
                    <div class='message-body mt-2'>
                      <p>
                        ヘルパー関数には、大まかに言ってブロックヘルパー関数と そうでないヘルパー関数( tag helper )とがありますが、両者はともに、Handlebars.registerHelper()を使って作成されます。
                        <br />
                        ブロックヘルパー関数は、そのブロック部分（テンプレート）をoptions.fn()で処理をするということが、下記のページで詳しく丁寧に説明されています。
                      </p>
                      <div class='has-text-centered'>
                        <a
                          href='https://subscription.packtpub.com/book/web_development/9781783282654/1/ch01lvl1sec06/top-6-features-you-need-to-know-about'
                          title='Instant Handlebars.js'
                        >
                          Instant Handlebars.js By Gabriel Manricks
                        </a>
                      </div>
                    </div>
                  </article>
                  <h2 class='notification is-info subtitle'>
                    Block Version
                  </h2>
                  {{#formIt user}}
                    <div class='field'>
                      <label class='label'>
                        名前
                      </label>
                      <div class='control'>
                        {{name}}
                      </div>
                    </div>

                    <div class='field'>
                      <label class='label'>
                        年齢
                      </label>
                      <div class='control'>
                        {{age}}
                      </div>
                    </div>

                    <div class='field'>
                      {{newsletter}}
                      <label for='chkExB'>
                        メールを受け取る
                      </label>
                    </div>
                    {{submit}}<br />
                  {{/formIt}}
                </div>
                <hr />

                <div>
                  <h2 class='notification is-success subtitle'>
                    Tag Version
                  </h2>
                  {{formIt user}}
                </div></script><script>Handlebars.registerHelper('formIt', function (data, options) {
                  let fields = {};
                  //Generate the Inputs
                  for (let k in data) {
                    let v = data[k];
                    let html = '';
                    switch (typeof v) {
                      case 'string':
                        v = Handlebars.Utils.escapeExpression(v);
                        html = `<input class="input is-medium" type="text" name="${k}" value="${v}" />`;
                        // html = '<input type="text" name="' + k + '" value="' + v + '" />';
                        break;
                      case 'number':
                        html = `<input class="input is-medium" type="number" name="${k}" value="${v}" />`;
                        break;
                      case 'boolean':
                        let checked = v ? 'checked' : '';
                        html = `<input id="chkExB" type="checkbox" class="is-checkradio" name="${k}" ${checked} />`;
                        break;
                    }
                    fields[k] = new Handlebars.SafeString(html);
                  }

                  let out = '<form>';

                  let button = `
              <div class="field">
                <div class="control" id="submit">
                  <button class="button has-background-link-light mt-4">送信</button>
                </div>
              </div>
              `;
                  if (typeof options.fn == 'undefined') {
                    //If it's a tag helper then add each element manually
                    for (let k in fields) {
                      if (k === 'newsletter') {
                        let checked = data[k] ? 'checked' : '';
                        out += `
                <div class="field">
                  <input id="chkEx" type="checkbox" class="is-checkradio" name="${k}" ${checked} />
                  <label for="chkEx">メールを受け取る</label>
                </div>`;
                      } else {
                        out += `
                <div class="field">
                  <label class="label">${k}</label>
                  <div class="control">${fields[k]}</div>
                </div>`;
                      }
                    }
                    out += button;
                  } else {
                    //If it's a block helper add the button and run the template
                    fields.submit = new Handlebars.SafeString(button);
                    out += options.fn(fields);
                  }

                  out += '</form>';
                  return new Handlebars.SafeString(out);
                });

                let userData = {
                  name: 'John Smith',
                  age: 25,
                  newsletter: true,
                };

                $$qtFnqT('#template', { user: userData }, '#target');</script><hr/></main><div class="box"><h2 class="subtitle has-background-white-ter mb-2 p-2">上記のソースコード</h2><blockquote class="is-size-6 ml-2"><pre id="pre1">
&lt;!--https://subscription.packtpub.com/book/web_development/9781783282654/1/ch01lvl1sec06/top-6-features-you-need-to-know-about --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello Handlebars&lt;/title&gt;

    &lt;link
      rel=&quot;stylesheet&quot;
      href=&quot;https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css&quot;
    /&gt;
    &lt;link
      rel=&quot;stylesheet&quot;
      href=&quot;https://cdn.jsdelivr.net/npm/bulma-extensions@6.2.7/dist/css/bulma-extensions.min.css&quot;
    /&gt;

    &lt;!-- &lt;script src=&quot;./js/handlebars.min-v4.7.6.js&quot;&gt;&lt;/script&gt; --&gt;

    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;../../js/shortBulma$$.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;../../js/shortHbs$$.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;section class=&quot;section&quot;&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;div id=&quot;target&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;

    &lt;script id=&quot;template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
      &lt;div&gt;
        &lt;article class=&quot;message has-background-success-light&quot;&gt;
          &lt;div class=&quot;message-header has-background-warning&quot;&gt;
            &lt;p&gt;ヘルパー関数&lt;/p&gt;
          &lt;/div&gt;
          &lt;div class=&quot;message-body mt-2&quot;&gt;
            &lt;p&gt;
              ヘルパー関数には、大まかに言ってブロックヘルパー関数と そうでないヘルパー関数( tag helper )とがありますが、両者はともに、Handlebars.registerHelper()を使って作成されます。&lt;br&gt;
              ブロックヘルパー関数は、そのブロック部分（テンプレート）をoptions.fn()で処理をするということが、下記のページで詳しく丁寧に説明されています。
            &lt;/p&gt;
            &lt;div class=&quot;has-text-centered&quot;&gt;&lt;a href=&quot;https://subscription.packtpub.com/book/web_development/9781783282654/1/ch01lvl1sec06/top-6-features-you-need-to-know-about&quot;title=&quot;Instant Handlebars.js&quot;&gt;Instant Handlebars.js By Gabriel Manricks&lt;/a&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/article&gt;
        &lt;h2 class=&quot;notification is-info subtitle&quot;&gt;Block Version&lt;/h2&gt;
        {{#formIt user}}
          &lt;div class=&quot;field&quot;&gt;
            &lt;label class=&quot;label&quot;&gt;名前&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;{{name}}&lt;/div&gt;
          &lt;/div&gt;

          &lt;div class=&quot;field&quot;&gt;
            &lt;label class=&quot;label&quot;&gt;年齢&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;{{age}}&lt;/div&gt;
          &lt;/div&gt;

          &lt;div class=&quot;field&quot;&gt;
            {{newsletter}}
            &lt;label for=&quot;chkExB&quot;&gt;メールを受け取る&lt;/label&gt;
          &lt;/div&gt;
          {{submit}}&lt;br&gt;
        {{/formIt}}
      &lt;/div&gt;
      &lt;hr&gt;

      &lt;div&gt;
        &lt;h2 class=&quot;notification is-success subtitle&quot;&gt;Tag Version&lt;/h2&gt;
        {{formIt user}}
      &lt;/div&gt;
    &lt;/script&gt;

    &lt;script&gt;
      Handlebars.registerHelper(&#039;formIt&#039;, function (data, options) {
        let fields = {};
        //Generate the Inputs
        for (let k in data) {
          let v = data[k];
          let html = &#039;&#039;;
          switch (typeof v) {
            case &#039;string&#039;:
              v = Handlebars.Utils.escapeExpression(v);
              html = `&lt;input class=&quot;input is-medium&quot; type=&quot;text&quot; name=&quot;${k}&quot; value=&quot;${v}&quot; /&gt;`;
              // html = &#039;&lt;input type=&quot;text&quot; name=&quot;&#039; + k + &#039;&quot; value=&quot;&#039; + v + &#039;&quot; /&gt;&#039;;
              break;
            case &#039;number&#039;:
              html = `&lt;input class=&quot;input is-medium&quot; type=&quot;number&quot; name=&quot;${k}&quot; value=&quot;${v}&quot; /&gt;`;
              break;
            case &#039;boolean&#039;:
              let checked = v ? &#039;checked&#039; : &#039;&#039;;
              html = `&lt;input id=&quot;chkExB&quot; type=&quot;checkbox&quot; class=&quot;is-checkradio&quot; name=&quot;${k}&quot; ${checked} /&gt;`;
              break;
          }
          fields[k] = new Handlebars.SafeString(html);
        }

        let out = &#039;&lt;form&gt;&#039;;

        let button = `
              &lt;div class=&quot;field&quot;&gt;
                &lt;div class=&quot;control&quot; id=&quot;submit&quot;&gt;
                  &lt;button class=&quot;button has-background-link-light mt-4&quot;&gt;送信&lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              `;
        if (typeof options.fn == &#039;undefined&#039;) {
          //If it&#039;s a tag helper then add each element manually
          for (let k in fields) {
            if (k === &#039;newsletter&#039;) {
              let checked = data[k] ? &#039;checked&#039; : &#039;&#039;;
              out += `
                &lt;div class=&quot;field&quot;&gt;
                  &lt;input id=&quot;chkEx&quot; type=&quot;checkbox&quot; class=&quot;is-checkradio&quot; name=&quot;${k}&quot; ${checked} /&gt;
                  &lt;label for=&quot;chkEx&quot;&gt;メールを受け取る&lt;/label&gt;
                &lt;/div&gt;`;
            } else {
              out += `
                &lt;div class=&quot;field&quot;&gt;
                  &lt;label class=&quot;label&quot;&gt;${k}&lt;/label&gt;
                  &lt;div class=&quot;control&quot;&gt;${fields[k]}&lt;/div&gt;
                &lt;/div&gt;`;
            }
          }
          out += button;
        } else {
          //If it&#039;s a block helper add the button and run the template
          fields.submit = new Handlebars.SafeString(button);
          out += options.fn(fields);
        }

        out += &#039;&lt;/form&gt;&#039;;
        return new Handlebars.SafeString(out);
      });

      let userData = {
        name: &#039;John Smith&#039;,
        age: 25,
        newsletter: true,
      };

      $$qtFnqT(&#039;#template&#039;, { user: userData }, &#039;#target&#039;);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></blockquote><div class="box"><h2 class="is-size-4 has-background-white-ter p-2 km">解説</h2><div class="content"><ul><li>BulmaでJavascriptを利用するために、このWebサイトでは<br/>　<a href="../../sub/js/shortBulma.html"><strong>shortBulma$$.js</strong> または <strong>shortBulma.js</strong></a><br/>というライブラリを使います。</li><li class="pt-2">使い方の例：&lt;script src=&quot;/src/js/shortBulma$$.js&quot;&gt;&lt;/script&gt;<br/>headタグ内に挿入。但し、pathは状況によって変わります。</li><li class="pt-2"><p class="pt-3 px-3">例えば、notification$$.htmlとshortBulma$$.jsが同じフォルダにある時は<br/>&lt;script src=&quot;./shortBulma$$.js&quot;&gt;&lt;/script&gt; または<br/>&lt;script src=&quot;shortBulma$$.js&quot;&gt;&lt;/script&gt; となります。</p></li><li>同じく、handlebars用に<br/>　<a href="../../sub/js/shortHbs.html"><strong class="has-text-warning-dark">shortHbs$$.js</strong></a><br/>というライブラリを使います。</li><hr/><dt>$$bulmaMenu('#burger', '#nav-links');</dt><dd class="py-2">狭い画面で表示されるBulmaのburgerメニューをコントロールします。<br/>burgerアイコンとbodyにそれぞれイベントを設定して、<ul><li>[burgerアイコン]のクリックでburgerメニューを開閉</li><li>[body]のクリックでburgerメニューを閉じます。</li></ul></dd><dt>$$codeS('#pre1')</dt><dd class="py-2">コードの全コピーを準備するため、コードをクリックしたときにそれを選択状態にします。</dd><li class="pt-1"><dl><dt><strong>$$qtFnqT('#template', { user: userData }, '#target');</strong><dd class="py-2">テンプレート#templateをコンパイルし、コンテキスト{ user: userData }を適用して得られたHTMLコードを、要素#contentsのinnserHTMLプロパティに代入する。</dd></dt></dl></li></ul></div></div></div></div><div class="column"></div></div><div class="section pt-0 pb-0"><nav class="breadcrumb has-arrow-separator"><ul class="is-size-6 container"><li><a href="/" class="has-text-grey-light">Top page</a></li><li><a href="../../sub/hbs/hbs.html" class="has-text-grey">Handlebars</a></li><li class="is-active"><a href="#">packtpub</a></li></ul></nav></div></div></section><script>$$bulmaMenu('#burger', '#nav-links');
      $$codeS('#pre1');</script><script src="../../../main.6af79e4ef33048338434.bundle.js"></script><script src="../../../vendor.23e019281b5239926c72.bundle.js"></script></body></html>